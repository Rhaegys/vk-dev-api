# vk-dev-api

# Положительные тест-кейсы на likes.add #  

### Access_token = если не указано другое, то user_token с OAuth со своего приложения ###
### Реквест из 1+ означает ссылку на 1й положительный реквест для данного метода (1- для 1го отрицательного) ###
### Профиль закрыт означает что либо профиль закрыт для всех, либо для конкретного владельца токена (заблокирован, не в друзьях, етс)

 1. Реквест с полным набором параметров - type (пост), owner_id (свой), item_id(свой пост), access_key, v(5.52) - профиль свой, пост существует, не был лайкнут до этого
   Ответ - обьект с количеством лайков (плюс 1 к кол-ву до запроса)
 2. Реквест с полным набором параметров - type (пост), owner_id (свой), item_id(свой пост), access_key, v(5.52) - профиль свой, пост существует, был лайкнут до этого
 Ответ - обьект с количеством лайков (кол-во лайков не изменилось)
 3. Реквест с полным набором параметров без owner_id - type (пост), item_id (свой пост), access_key, v(5.52) - - профиль свой, пост существует, не был лайкнут до этого
 Ответ - обьект с количеством лайков (плюс 1 к кол-ву до запроса)
 4. Реквест с полным набором параметров без owner_id - type (пост), item_id (свой пост), access_key, v(5.52) - - профиль свой, пост существует, был лайкнут до этого
 Ответ - обьект с количеством лайков (кол-во лайков не изменилось) 
 5. Реквест с полным набором параметров - type (пост), owner_id (чужой, стена открытая), item_id(чужой пост), access_key, v(5.52) - профиль чужой и открытый, пост существует, не был лайкнут до этого
 Ответ - обьект с количеством лайков (плюс 1 к кол-ву до запроса) 
 6. Реквест с полным набором параметров - type (пост), owner_id (чужой, стена открытая), item_id(чужой пост), access_key, v(5.52) - профиль чужой и открытый, пост существует, был лайкнут до этого
 Ответ - обьект с количеством лайков (кол-во лайков не изменилось)
 7. Реквест с полным набором параметров - type (фото), owner_id (свой), item_id(свое фото), access_key, v(5.52) - профиль свой, фото существует, не было лайкнуто до этого
 Ответ - обьект с количеством лайков (плюс 1 к кол-ву до запроса)
 8. Реквест с полным набором параметров - type (пост), owner_id (свой), item_id(чужой пост), access_key, v(5.52) - профиль свой, чужой пост с таким id существует, свой пост с таким id существует
 Ответ - обьект с количеством лайков на своем посте
 9. Реквест с полным набором параметров и дополнительным не указанным в спеке параметром - type (пост), owner_id (свой), item_id(свой пост), access_key, v(5.52), добавлен параметр asd со значением asd - профиль свой, пост существует
 Ответ - обьект с количеством лайков 
 10. С тротлингом (1кб up\download и 10с пинг) делается реквест с полным набором параметров и дополнительным не указанным в спеке параметром - type (пост), owner_id (свой), item_id(свой пост), access_key, v(5.52) - профиль свой, пост существует
 Ответ - обьект с количеством лайков 
 11. Реквест из 1+, item_id = double (111.00)
 Ответ - обьект с количеством лайков (плюс 1 к кол-ву до запроса)
 12. Реквест из 1+, item_id = double (111.9999999999999999999999999999999)
 Ответ - обьект с количеством лайков (плюс 1 к кол-ву до запроса)
 Видимо, где-то число из item_id кастится в интегер с округлением вниз, не уверен правильно ли это, в спеке написано positive number

# Негативные тест-кейсы на likes.add #

 1. Реквест с полным набором параметров - type (пост), owner_id (свой), item_id(свой пост), access_key (сервисный токен из приложения), v(5.52) - профиль свой, пост существует
 Ответ - ошибка 28 - Application authorization failed: method is unavailable with service token.
 2. Реквест с полным набором параметров - type (фото), owner_id (свой), item_id(свой пост), access_key, v(5.52)  - профиль свой, пост существует
 Ответ - ошибка 100 - обьект не найден, тип не соответствует обьекту
 3. Реквест с полным набором параметров - type (пост), owner_id (свой), item_id(чужой пост), access_key, v(5.52)  - профиль свой, чужой пост существует, но у владельца профиля из owner_id нет поста с таким id
 Ответ - ошибка 100 - обьект не найден
 4. Реквест с неполным набором параметров (нет type) - owner_id (свой), item_id(свой пост), access_key, v(5.52) - профиль свой, пост существует
 Ответ - ошибка 100 - нет параметра type
 5. Реквест с неполным набором параметров (нет access_token) - type (пост), owner_id (свой), item_id(свой пост), v(5.52) - профиль свой, пост существует
 Ответ - ошибка 5 - нет токена
 6. Реквест с неполным набором параметров - type (пост), owner_id (свой), item_id(свой пост), access_key, v(5.52) - профиль свой, пост существует, не был лайкнут до этого
 Ответ - обьект с количеством лайков (плюс 1 к кол-ву до запроса)
 7. Реквест с неполным набором параметров (нет item_id) - type (пост), owner_id (свой), access_key, v(5.52) - профиль свой
 Ответ - ошибка 100 - нет параметра item_id
 8. Реквест с полным набором параметров с устаревшим v - type (пост), owner_id (свой), item_id(свой пост), access_key, v(5.1) - профиль свой, пост существует
 Ответ - ошибка 8 - устаревшая версия
 9. Реквест с неполным набором параметров (нет v) - type (пост), owner_id (свой), item_id(свой пост), access_key, v(5.1) - профиль свой, пост существует
 Ответ - ошибка 8 - не указан v
 10. Реквест с полным набором параметров - type (пост), owner_id (свой), item_id(несуществующий пост), access_key, v(5.52) - профиль свой, пост не существует
 Ответ - ошибка 100 - обьект не найден
 11. Реквест с полным набором параметров - type (пост), owner_id (чужой профиль с закрытой стеной), item_id(чужой пост), access_key, v(5.52) - профиль чужой, пост существует, стена закрыта
 Ответ - ошибка 15 Access denied: this profile is private
 12. Много раз с очень маленькой задержкой повторяется реквест с полным набором параметров - type (пост), owner_id (свой), item_id(свой пост), access_key, v(5.52) - профиль свой, пост существует
 Ответ - ошибка 6 - слишком много запросов в секунду (14 - капча(больше 3 запросов в секунду?), 9 - flood control (гуглопоиск дал "более 100 сообщений за 15 минут"))
 13. Через впн делается реквест с полным набором параметров - type (пост), owner_id (свой), item_id(свой пост), access_key, v(5.52) - профиль свой, пост существует
 Ответ - ошибка 5 - другой ip (капчи или flood control добиться не удалось, нужно больше ресерча)
 14. Через http делается реквест с полным набором параметров - type (пост), owner_id (свой), item_id(свой пост), access_key, v(5.52) - профиль свой, пост существует, не был лайкнут до этого
 Ответ - редирект 307 на https, ответ как в 1+.
 15. Реквест из 11-, type = photo, item_id = чужое закрытое фото
 Ответ - ошибка 15 Access denied: this profile is private
 16. Реквест из 1+, type = 1 ИЛИ item_id = string ИЛИ item_id = негативное число ИЛИ owner_id = string
 Ответ - ошибка 100, неправильный тип параметра
 17. Реквест из 1+, item_id = D5CF
 Ответ - ошибка 100, item_id not integer
 Странно, в спеке написано что item_id это positive number, D5CF это 54735 в hex, положительное число. При этом double 123.12 и 123.99 отрабатывают нормально, показывая результат для 123 в обоих случаях. Непонятно



# Положительные тест-кейсы на likes.getList #  

### Access_token = если не указано другое, то service_token со своего приложения ###

 1. Реквест с полным набором параметров - type (пост), owner_id (свой), item_id(свой пост), access_key, v(5.52), filter (likes), friends_only(0), extended(0), offset (0), count (1000), skip_own (0) - профиль свой, пост существует, пост лайкнут собой
 Ответ - обьект с количеством лайков и списком профилей, которые лайкнули этот пост
 2. Реквест из 1+, access_key = user token свой, skip_own = 1 
 Ответ - обьект с количеством лайков и списком профилей, которые лайкнули этот пост, без учета лайка от владельца токена
 3. Реквест из 1+, skip_own как 1 
 Ответ - обьект с количеством лайков и списком профилей, которые лайкнули этот пост, skip_own не оказывает влияния, т.к. владелец сервисного токена отличается от владельца профиля
 4. Реквест из 1+, access_key = user token свой, friends_only = 1 
 Ответ - обьект с количеством лайков и списком профилей, которые лайкнули этот пост, учитываются только друзья владельца токена
 5. Реквест из 1+, friends_only = 1
 Ответ - обьект с количеством лайков и списком профилей, которые лайкнули этот пост, friends_only не оказывает влияния, т.к. владелец сервисного токена отличается от владельца профиля
 6. Реквест из 1+, extended = 1
 Ответ - обьект с количеством лайков и списком обьектов, поставивших лайк. Обьект состоит из id, типа (профиль\коммунити), имени обьекта (Имя \ Фамилия в случае профиля, в случае коммунити - имя коммунити?) и свойства deactivated со значением причины деактивации в случае деактивации обьекта.
 7. Реквест из 1+, filter = copies
 Ответ - обьект с количеством репостов и списком профилей, которые репостнули этот пост (если extended = 1, то возвращается список обьектов, репостнувших этот пост)
 8. Реквест из 1+, count = 2
 Ответ - обьект с количеством лайков и списком профилей, которые лайкнули этот пост, список возвращается из двух профилей (два последних, судя по всему, но не уверен), кол-во лайков показывается полностью
 9. Реквест из 1+, offset = 2
 Ответ - обьект с количеством лайков и списком профилей, которые лайкнули этот пост, в списке нет 2 последних (судя по всему) лайкнувших профиля, кол-во лайков показывается полностью
 10. Реквест с неполным набором параметров - type (пост), owner_id (свой), item_id(свой пост), access_key, v(5.52)
 Ответ - обьект с количеством лайков и списком профилей, которые лайкнули этот пост
 11. Реквест из 1+, с дополнительными параметрами и дополнительным не указанным в спеке параметром - добавлен параметр asd со значением asd
 Ответ - обьект с количеством лайков и списком профилей, которые лайкнули этот пост
 12. Реквест из 1+, с type (фото) и item_id (свое фото)
 Ответ - обьект с количеством лайков и списком профилей, которые лайкнули это фото
 13. Реквест из 1+, вместо item_id указывается page_url, owner_id указан либо свой, в случае своего поста, на который указывает виджет, либо владельца поста
 Ответ - предполагаю, что при совпадении всех нужных параметров (пост не закрыт, существует) вернется обьект с количеством лайков и списком профилей, которые лайкнули этот пост, не тестировал
 14. Реквест из 1+, указан access_key = user token владельца поста, owner_id не указан
 Ответ - обьект с количеством лайков и списком профилей, которые лайкнули этот пост
 15. Реквест с 1+, skip_own = string (asdasd), access_key = user token
 Ответ - обьект с количеством лайков и списком профилей, которые лайкнули этот пост, за исключением лайка владельца токена
 Странная ситуация - в спеке skip_own это флаг 1 или 0. Судя по поведению, флаг 1 выставляется в случае если в параметре передан не 0 (буквально что угодно, 00, -1, asdadasd)
 16. Реквест с 1+, filters = любое значение, кроме строки copies (copies2, like2, -1, 00.00) 
 Ответ - обьект с количеством лайков и списком профилей, которые лайкнули этот пост
 Видимо, та же ситуация как и со skip_own, переключение на copies происходит только при строке copies, остальное прожежывается без ошибок и без действий
 17. Та же ситуация с extended - либо 0, либо любое значение


# Негативные тест-кейсы на likes.getList #

 1. Реквест с полным набором параметров - type (пост), owner_id (чужой), item_id(чужой пост), access_key, v(5.52), filter (likes), friends_only(0), extended(0), offset (0), count (1000), skip_own (0) - профиль чужой, пост существует, профиль закрыт
 Ответ - ошибка 15 Access denied: this profile is private - НЕ УДАЛОСЬ ПРОВЕРИТЬ САМОМУ, копирую из 11- для likes.add
 2. Реквест из 1+, с type (photo), item_id (чужой пост), owner_id (чужой) - профиль чужой, пост существует, фото не существует, профиль закрыт
 Ответ - не получилось проверить, одно из двух, либо сначала упадет на проверке на доступ, либо сначала упадет на проверке наличия обьекта, вернется либо ошибка доступа (15), либо ошибка 100 с обьектом, но это звучит неправильно
 3. Реквест из 1+, с несуществующим item_id
 Ответ - ошибка 100, не найден обьект
 4. Странная ситуация. Реквест из 1+, friends_only указан (1 или 0), count указан как 1000
 Ответ - обьект с количеством лайков и списком профилей, которые лайкнули этот пост (за рамки Count выйти в рамках своего профиля не удалось), по спеке не понятно, максимум указан для параметра запроса или для фактического лимита в теле ответа. Судя по всему указан фактический лимит.
 5. Странная ситуация. По спеке очень непонятно с owner_id:
 If the type parameter is set as sitepage, the application ID is passed as owner_id. Use negative value for a community id. If the type parameter is not set, the owner_id is assumed to be either the current user or the same application ID as if the type parameter was set to sitepage.
 Type не может быть is not set, т.к. это required parameter, что там имелось в виду, что is not set as "sitepage"?. Owner_id это НЕ required parameter, но без указания owner_id реквест не проходит по ошибке 100, как с required_parameter not set. Owner_id может быть пустым только если указан access_key = user token, но это не описано в спеке, access_key вообще не указан в спеке
 Реквест из 1+, owner_id не указан
 Ответ - ошибка 100, нет параметра owner_id
 6. Реквесты с неправильными параметрами count - count > 1001, count <0, count = string
 Ответ - ошибка 100, параметр count not int
 7. Реквесты с отсутствующими required параметрами - type, owner_id, item_id (page_url)
 Ответ - ошибка 100, нет необходимого параметра
 8. Реквест с отсутсвующим или устаревшим v
 Ответ - ошибка 8, либо нет v, либо устаревший v
 9. Реквест без access_key
 Ответ - ошибка 5 - нет токена
 
